<svg xmlns="http://www.w3.org/2000/svg" height={height}px width={width}px>
	{#each points as point}
		<circle cx={calculatePlotX(point.x)}px cy={calculatePlotY(point.y)}px r={pointSize} />
	{/each}
</svg>

<script>
const max = (maybeNull, number) => maybeNull === null ? number : Math.max(maybeNull, number)
const min = (maybeNull, number) => maybeNull === null ? number : Math.min(maybeNull, number)

export default {
	data() {
		return {
			leftMargin: 50,
			bottomMargin: 40,
			width: 600,
			height: 200,
			pointSize: 2,
			points: [],
		}
	},
	computed: {
		plotWidth: ({ width, leftMargin }) => width - leftMargin,
		plotHeight: ({ height, bottomMargin }) => height - bottomMargin,
		calculatePlotX: ({ leftMargin, plotWidth, minsAndMaxes, dataRanges }) => x => {
			const xRatio = ((x - minsAndMaxes.minX) / dataRanges.x)

			return leftMargin + (xRatio * plotWidth)
		},
		calculatePlotY: ({ plotHeight, minsAndMaxes, dataRanges }) => y => {
			const yRatio = ((y - minsAndMaxes.minY) / dataRanges.y)

			return plotHeight - (yRatio * plotHeight)
		},
		minsAndMaxes: ({ points }) => points.reduce(({ minX, maxX, minY, maxY }, { x, y }) => ({
			minX: min(minX, x),
			maxX: max(maxX, x),
			minY: min(minY, y),
			maxY: max(maxY, y),
		}), { minX: null, maxX: null, minY: null, maxY: null }),
		dataRanges: ({ minsAndMaxes }) => ({
			x: minsAndMaxes.maxX - minsAndMaxes.minX,
			y: minsAndMaxes.maxY - minsAndMaxes.minY,
		}),
	},
}
</script>

